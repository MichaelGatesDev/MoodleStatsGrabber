# Moodle Stats Grabber

Built for GEO Academy, an online course at SUNY Plattsburgh


## Requirements
* Python 3
* Administrative or Instructor controls for the Moodle course

## How to use

1. Download the zip file and extract it to a place you can access

2. Download your course log file in JSON format. To do this, you can simply use the link below and replace the placeholder with your course id.
`https://moodle.plattsburgh.edu/report/log/index.php?id=PLACEHOLDER`

3. Place the log file in the same folder as the program (main.py)

4. Open the command line / terminal and run the program: `main.py <logFile> <gradesFile> [-b <blacklistFile.ext>]` where <logFile> is the path to your downloaded log file and <gradesFile> is the path to your downloaded and converted grades file. 

5. The program should run and provide info via the CLI before finishing


## Optional parameters

`-b <blacklistFile>` To blacklist users from results.

The blacklist will include everyone *except* the users in the blacklist


## Result files

All files saved or generated by the program will be stored in a relative folder called `output`.


### The `grades.json` file

The `grades.json` file is used to recognize *all* enrolled users in the course as opposed to just the ones who have log entries. Note that not all users who are enrolled will have log entries, only those who have accessed the course at least once will.

To obtain your `grades.json` file, you will first need to download the 'grades' as an excel spreadsheet. For some reason, there is an issue (or poorly-implemented feature) in moodle where exporting as XML file does not give you the student's first/last name, but rather only identifies them with their internal id. You can use this link to get there, just replace the placeholder with your course ID.

`https://moodle.plattsburgh.edu/grade/export/xls/index.php?id=PLACEHOLDER`

Then you will need to convert that file to a JSON file because that's what the script uses to parse data. You can google 'excel to json' converter. [Here is an example converter that may work for you.](http://beautifytools.com/excel-to-json-converter.php)
